{"version":3,"file":"js/CompliancePolicies.1382e150696bae8f85e2.js","mappings":"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","sources":["webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/Dark/configContext.js","webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/Main/Main.js","webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/PageHeader/PageHeader.js","webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/PageHeader/PageHeaderTitle.js","webpack:///./src/SmartComponents/CompliancePolicies/CompliancePolicies.js"],"sourcesContent":["import React from 'react';\nvar ThemeContext = /*#__PURE__*/React.createContext('light');\nexport default ThemeContext;","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport propTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { connect } from 'react-redux';\nimport ThemeContext from '../Dark/configContext';\nimport \"../../Main/./main.css\";\n\nvar toKebab = function toKebab(text) {\n  return text.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\n};\n/**\n * This is a component that wraps the page\n */\n\n\nexport var Main = /*#__PURE__*/function (_Component) {\n  _inherits(Main, _Component);\n\n  var _super = _createSuper(Main);\n\n  function Main() {\n    _classCallCheck(this, Main);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Main, [{\n    key: \"calculateLocation\",\n    value: function calculateLocation() {\n      var _this$props = this.props,\n          path = _this$props.path,\n          params = _this$props.params;\n\n      if (insights && insights.chrome && insights.chrome.$internal && insights.chrome.$internal.store) {\n        var chromeState = insights.chrome.$internal.store.getState();\n\n        if (path && chromeState) {\n          return path.split('/').reduce(function (acc, curr) {\n            if (curr.indexOf(':') === 0) {\n              acc.dynamic = _objectSpread(_objectSpread({}, acc.dynamic), {}, _defineProperty({}, \"data-\".concat(toKebab(curr.substr(1))), params[curr.substr(1)]));\n            } else {\n              acc.staticPart = [].concat(_toConsumableArray(acc.staticPart), _toConsumableArray(curr !== '' ? [curr] : []));\n            }\n\n            return acc;\n          }, {\n            staticPart: [chromeState.chrome.appId],\n            dynamic: {}\n          });\n        }\n      }\n\n      return {\n        staticPart: []\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          className = _this$props2.className,\n          children = _this$props2.children,\n          params = _this$props2.params,\n          path = _this$props2.path,\n          props = _objectWithoutProperties(_this$props2, [\"className\", \"children\", \"params\", \"path\"]);\n\n      var _this$calculateLocati = this.calculateLocation(),\n          dynamic = _this$calculateLocati.dynamic,\n          staticPart = _this$calculateLocati.staticPart;\n\n      return /*#__PURE__*/React.createElement(ThemeContext.Consumer, null, function () {\n        var theme = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'light';\n        var themeClasses = classNames(_defineProperty({}, \"pf-m-\".concat(theme), theme === 'dark'));\n        return {\n          dark: /*#__PURE__*/React.createElement(\"section\", _extends({}, props, dynamic, {\n            \"page-type\": staticPart.join('-'),\n            className: \"\".concat(classNames(className, 'pf-l-page__main-section pf-c-page__main-section'), \" \").concat(themeClasses)\n          }), React.Children.map(children, function (child) {\n            return /*#__PURE__*/React.cloneElement(child, {\n              className: 'pf-m-dark'\n            });\n          })),\n          light: /*#__PURE__*/React.createElement(\"section\", _extends({}, props, dynamic, {\n            \"page-type\": staticPart.join('-'),\n            className: \"\".concat(classNames(className, 'pf-l-page__main-section pf-c-page__main-section'))\n          }), children)\n        }[theme];\n      });\n    }\n  }]);\n\n  return Main;\n}(Component);\nMain.propTypes = {\n  className: propTypes.string,\n  children: propTypes.any.isRequired,\n  params: propTypes.any,\n  path: propTypes.string\n};\nexport default connect(function (_ref) {\n  var routerData = _ref.routerData;\n  return {\n    params: routerData && routerData.params,\n    path: routerData && routerData.path\n  };\n}, function () {\n  return {};\n})(Main);","import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport React from 'react';\nimport propTypes from 'prop-types';\nimport classNames from 'classnames';\nimport ThemeContext from '../Dark/configContext';\nimport \"../../PageHeader/./page-header.css\";\n/**\n * This is a page header that mimics the patternfly layout for a header section\n */\n\nvar PageHeader = function PageHeader(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      props = _objectWithoutProperties(_ref, [\"className\", \"children\"]);\n\n  var pageHeaderClasses = classNames(className, 'pf-l-page-header', 'pf-c-page-header', 'pf-l-page__main-section', 'pf-c-page__main-section');\n  return /*#__PURE__*/React.createElement(ThemeContext.Consumer, null, function () {\n    var theme = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'light';\n    var themeClasses = classNames(_defineProperty({}, \"pf-m-\".concat(theme, \"-200\"), theme === 'dark'), _defineProperty({}, \"pf-m-light\", theme === 'light'));\n    return /*#__PURE__*/React.createElement(\"section\", _extends({}, props, {\n      className: \"\".concat(pageHeaderClasses, \" \").concat(themeClasses),\n      \"widget-type\": \"InsightsPageHeader\"\n    }), children);\n  });\n};\n\nexport default PageHeader;\nPageHeader.propTypes = {\n  children: propTypes.any.isRequired,\n  className: propTypes.string\n};","import React from 'react';\nimport propTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { Title } from \"@patternfly/react-core/dist/esm/components/Title/Title.js\";\n/**\n * This is the title section of the pageHeader\n */\n\nvar PageHeaderTitle = function PageHeaderTitle(_ref) {\n  var className = _ref.className,\n      title = _ref.title;\n  var pageHeaderTitleClasses = classNames(className);\n  return /*#__PURE__*/React.createElement(Title, {\n    headingLevel: \"h1\",\n    size: \"2xl\",\n    className: pageHeaderTitleClasses,\n    \"widget-type\": \"InsightsPageHeaderTitle\"\n  }, \" \", title, \" \");\n};\n\nexport default PageHeaderTitle;\nPageHeaderTitle.propTypes = {\n  title: propTypes.node.isRequired,\n  className: propTypes.string\n};","import React, { useEffect } from 'react';\nimport gql from 'graphql-tag';\nimport { useLocation } from 'react-router-dom';\nimport { useQuery } from '@apollo/client';\nimport { Button, Grid } from '@patternfly/react-core';\nimport PageHeader, {\n  PageHeaderTitle,\n} from '@redhat-cloud-services/frontend-components/PageHeader';\nimport Main from '@redhat-cloud-services/frontend-components/Main';\nimport ComplianceEmptyState from 'PresentationalComponents/ComplianceEmptyState';\nimport {\n  BackgroundLink,\n  ErrorPage,\n  LoadingPoliciesTable,\n  PoliciesTable,\n  StateView,\n  StateViewPart,\n} from 'PresentationalComponents';\n\nconst QUERY = gql`\n  {\n    profiles(search: \"external = false and canonical = false\") {\n      edges {\n        node {\n          id\n          name\n          description\n          refId\n          complianceThreshold\n          totalHostCount\n          majorOsVersion\n          policyType\n          policy {\n            id\n            name\n          }\n          benchmark {\n            id\n            title\n            version\n          }\n          hosts {\n            id\n          }\n          businessObjective {\n            id\n            title\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const CompliancePolicies = () => {\n  const location = useLocation();\n  const createLink = (\n    <BackgroundLink to=\"/scappolicies/new\">\n      <Button variant=\"primary\" ouiaId=\"CreateNewPolicyButton\">\n        Create new policy\n      </Button>\n    </BackgroundLink>\n  );\n  let { data, error, loading, refetch } = useQuery(QUERY);\n  useEffect(() => {\n    refetch();\n  }, [location, refetch]);\n  let policies;\n\n  if (data) {\n    error = undefined;\n    loading = undefined;\n    policies = data.profiles.edges.map((profile) => profile.node);\n  }\n\n  return (\n    <React.Fragment>\n      <PageHeader className=\"page-header\">\n        <PageHeaderTitle title=\"SCAP policies\" />\n      </PageHeader>\n      <Main>\n        <StateView stateValues={{ error, data, loading }}>\n          <StateViewPart stateKey=\"error\">\n            <ErrorPage error={error} />\n          </StateViewPart>\n          <StateViewPart stateKey=\"loading\">\n            <LoadingPoliciesTable />\n          </StateViewPart>\n          <StateViewPart stateKey=\"data\">\n            {policies && policies.length === 0 ? (\n              <Grid hasGutter>\n                <ComplianceEmptyState\n                  title=\"No policies\"\n                  mainButton={createLink}\n                />\n              </Grid>\n            ) : (\n              <PoliciesTable policies={policies} />\n            )}\n          </StateViewPart>\n        </StateView>\n      </Main>\n    </React.Fragment>\n  );\n};\n\nexport default CompliancePolicies;\n"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","Main","_Component","Derived","hasNativeReflectConstruct","_super","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","value","_this$props","props","path","params","insights","chrome","$internal","store","chromeState","getState","split","reduce","acc","curr","indexOf","dynamic","concat","substr","replace","toLowerCase","staticPart","appId","_this$props2","className","children","_this$calculateLocati","calculateLocation","theme","undefined","themeClasses","dark","join","child","light","Component","propTypes","_ref","routerData","PageHeader","pageHeaderClasses","PageHeaderTitle","title","pageHeaderTitleClasses","headingLevel","size","QUERY","gql","CompliancePolicies","policies","location","useLocation","createLink","to","Button","variant","ouiaId","useQuery","data","error","loading","refetch","useEffect","profiles","edges","map","profile","node","stateValues","stateKey","Grid","hasGutter","mainButton"],"sourceRoot":""}
"use strict";(self.webpackChunkcompliance_frontend=self.webpackChunkcompliance_frontend||[]).push([[953,164],{84351:(e,n,t)=>{t.d(n,{_v:()=>h,_M:()=>P,a7:()=>C});var r,i,o,a,u,s,c,l,p=t(30168),f=t(67521),d=(0,f.ZP)(r||(r=(0,p.Z)(["\n  mutation CreateProfile($input: createProfileInput!) {\n    createProfile(input: $input) {\n      profile {\n        id\n      }\n    }\n  }\n"]))),v=(0,f.ZP)(i||(i=(0,p.Z)(["\n  mutation associateSystems($input: associateSystemsInput!) {\n    associateSystems(input: $input) {\n      profile {\n        id\n        policy {\n          id\n          profiles {\n            id\n            parentProfileId\n            osMinorVersion\n          }\n        }\n      }\n    }\n  }\n"]))),b=((0,f.ZP)(o||(o=(0,p.Z)(["\n  mutation associateProfiles($input: associateProfilesInput!) {\n    associateProfiles(input: $input) {\n      system {\n        id\n        name\n        profiles {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),(0,f.ZP)(a||(a=(0,p.Z)(["\n  mutation associateRules($input: associateRulesInput!) {\n    associateRules(input: $input) {\n      profile {\n        id\n      }\n    }\n  }\n"])))),m=(0,f.ZP)(u||(u=(0,p.Z)(["\n  mutation UpdateProfile($input: UpdateProfileInput!) {\n    updateProfile(input: $input) {\n      profile {\n        id\n        name\n        complianceThreshold\n        businessObjectiveId\n        description\n      }\n    }\n  }\n"]))),y=(0,f.ZP)(s||(s=(0,p.Z)(["\n  mutation createBusinessObjective($input: createBusinessObjectiveInput!) {\n    createBusinessObjective(input: $input) {\n      businessObjective {\n        id\n        title\n      }\n    }\n  }\n"]))),h=(0,f.ZP)(c||(c=(0,p.Z)(["\n  mutation DeleteProfile($input: deleteProfileInput!) {\n    deleteProfile(input: $input) {\n      profile {\n        id\n      }\n    }\n  }\n"]))),P=(0,f.ZP)(l||(l=(0,p.Z)(["\n  mutation DeleteReport($input: deleteTestResultsInput!) {\n    deleteTestResults(input: $input) {\n      profile {\n        id\n      }\n    }\n  }\n"]))),O=t(15861),w=t(87757),I=t.n(w),k=t(29439),x=t(45442);var Z=t(4942);function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach((function(n){(0,Z.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function D(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return $(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}function $(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}const C=function(){var e,n,t=(e=(0,x.D)(y),n=(0,k.Z)(e,1)[0],function(){var e=(0,O.Z)(I().mark((function e(t,r){var i,o,a,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null==t||null===(i=t.businessObjective)||void 0===i?void 0:i.title)!==(null==r?void 0:r.title)){e.next=4;break}return e.abrupt("return",null==t||null===(o=t.businessObjective)||void 0===o?void 0:o.id);case 4:if(""!==(null==r?void 0:r.title)){e.next=8;break}return e.abrupt("return",null);case 8:return e.next=10,n({variables:{input:{title:r.title}}});case 10:if(a=e.sent,u=a.data,!(s=a.error)){e.next=15;break}throw s;case 15:return e.abrupt("return",u.createBusinessObjective.businessObjective.id);case 16:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),r=function(){var e=(0,x.D)(m),n=(0,k.Z)(e,1)[0],t=(0,x.D)(d),r=(0,k.Z)(t,1)[0];return function(){var e=(0,O.Z)(I().mark((function e(t,i,o){var a,u,s,c,l,p,f,d,v,b,m,y,h,P,O,w,k;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.name,u=i.description,s=i.complianceThreshold,c={name:a,description:u,businessObjectiveId:o,complianceThreshold:parseFloat(s)},!t){e.next=11;break}return v=g({id:t},c),e.next=6,n({variables:{input:v}});case 6:b=e.sent,l=null===(f=b.data)||void 0===f||null===(d=f.updateProfile)||void 0===d?void 0:d.profile,p=b.error,e.next=18;break;case 11:return h=i.cloneFromProfileId,P=i.refId,O=i.benchmarkId,w=g(g({},c),{},{cloneFromProfileId:h,refId:P,benchmarkId:O}),e.next=15,r({variables:{input:w}});case 15:k=e.sent,l=null===(m=k.data)||void 0===m||null===(y=m.createProfile)||void 0===y?void 0:y.profile,p=k.error;case 18:if(!p){e.next=20;break}throw p;case 20:return e.abrupt("return",l);case 21:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()}(),i=function(){var e=(0,x.D)(v),n=(0,k.Z)(e,1)[0];return function(){var e=(0,O.Z)(I().mark((function e(t,r){var i,o,a,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.id,e.next=3,n({variables:{input:{id:o,systemIds:r.map((function(e){return e.id}))}}});case 3:if(a=e.sent,u=a.data,!(s=a.error)){e.next=8;break}throw s;case 8:return e.abrupt("return",null==u||null===(i=u.associateSystems)||void 0===i?void 0:i.profile);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}(),o=function(){var e=(0,x.D)(b),n=(0,k.Z)(e,1)[0];return function(){var e=(0,O.Z)(I().mark((function e(t,r){var i,o,a,u,s,c,l;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.id,o=t.osMinorVersion,a=t.ruleRefIds,u=r.find((function(e){return e.id===i||e.parentProfileId===i&&e.osMinorVersion===o})),s={id:null==u?void 0:u.id,ruleRefIds:a},e.next=5,n({variables:{input:s}});case 5:if(c=e.sent,!(l=c.error)){e.next=9;break}throw l;case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}();return function(){var e=(0,O.Z)(I().mark((function e(n,a,u){var s,c,l,p,f,d,v,b,m,y,h,P;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(null==a?void 0:a.selectedRuleRefIds)||[],l=3+c.length,p=0,f=function(){u&&u(++p/l)},e.next=6,t(n,null==a?void 0:a.businessObjective);case 6:return d=e.sent,f(),e.next=10,r(null===(s=n)||void 0===s?void 0:s.id,a,d);case 10:return v=e.sent,f(),n||(n=v),e.next=15,i(n,a.hosts);case 15:b=e.sent,m=b.policy.profiles,f(),y=D(c),e.prev=19,y.s();case 21:if((h=y.n()).done){e.next=28;break}return P=h.value,e.next=25,o(P,m);case 25:f();case 26:e.next=21;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(19),y.e(e.t0);case 33:return e.prev=33,y.f(),e.finish(33);case 36:return e.abrupt("return",v);case 37:case"end":return e.stop()}}),e,null,[[19,30,33,36]])})));return function(n,t,r){return e.apply(this,arguments)}}()}},57481:(e,n,t)=>{t.r(n),t.d(n,{default:()=>m});var r=t(29439),i=t(56976),o=t(45697),a=t.n(o),u=t(92950),s=t.n(u),c=t(334),l=t(45442),p=t(84351),f=t(83215),d=t(69888),v=t(65811),b=function(){var e,n=(0,c.useHistory)(),t=(0,c.useLocation)(),o=(null===(e=t.state)||void 0===e?void 0:e.profile).id,a=function(){n.push(t.state.background)},u=(0,l.D)(p._M,{onCompleted:function(){(0,v.C)((0,f.wN)({variant:"success",title:"Report deleted",description:"Systems associated with this policy will upload reports on the next check-in."})),n.push("/reports")},onError:function(e){(0,v.C)((0,f.wN)({variant:"danger",title:"Error removing report",description:e.message})),a()}}),b=(0,r.Z)(u,1)[0];return s().createElement(d.C,{isOpen:!0,variant:i.ModalVariant.small,title:"Delete report",ouiaId:"DeleteReportModal",onClose:a,actions:[s().createElement(i.Button,{key:"destroy",ouiaId:"DeleteReportButton","aria-label":"delete",variant:"danger",onClick:function(){return b({variables:{input:{profileId:o}}})}},"Delete report"),s().createElement(i.Button,{key:"cancel",ouiaId:"DeleteReportCancelButton",variant:"secondary",onClick:function(){return a()}},"Cancel")]},s().createElement(i.TextContent,null,"Deleting a report is permanent and cannot be undone."))};b.propTypes={onClose:a().func,isModalOpen:a().bool,onDelete:a().func,policyId:a().string},b.defaultProps={onDelete:function(){},onClose:function(){}};const m=b}}]);
//# sourceMappingURL=../sourcemaps/DeleteReport.f5c299fed4d6b4cd156980a7a821e28d.js.map
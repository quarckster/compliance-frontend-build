(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1025:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),n(231),n(468);var i=n(466);n(469);var o=r(n(1)),a=r(n(20));n(697),n(356);var s=n(473),c=n(471),l=n(704),u=n(745);function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){c._inherits(n,e);var t=function(e){return function(){var t,n=c._getPrototypeOf(e);if(p()){var r=c._getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c._possibleConstructorReturn(this,t)}}(n);function n(){var e;c._classCallCheck(this,n);for(var r=arguments.length,a=new Array(r),p=0;p<r;p++)a[p]=arguments[p];return e=t.call.apply(t,[this].concat(a)),i._defineProperty(c._assertThisInitialized(e),"createColumns",(function(){var t=e.props.colSize;return s._toConsumableArray(Array(t)).map((function(){return{title:o.createElement(u.Skeleton,{size:u.SkeletonSize.sm})}}))})),i._defineProperty(c._assertThisInitialized(e),"getColumns",(function(){var t=e.props,n=t.paddingColumnSize,r=t.columns;return e.newArray(n).map((function(){return""})).concat(r||e.createColumns())})),i._defineProperty(c._assertThisInitialized(e),"createRows",(function(){var t=e.props,n=t.colSize,r=t.rowSize,i=t.columns,a=t.paddingColumnSize,s=i?i.length:n;return e.newArray(r).map((function(){return{disableSelection:!0,cells:e.newArray(a).map((function(){return""})).concat(e.newArray(s).map((function(){return{title:o.createElement(u.Skeleton,{size:u.SkeletonSize.md})}})))}}))})),i._defineProperty(c._assertThisInitialized(e),"selectVariant",(function(){return e.props.hasRadio?(null===l.RowSelectVariant||void 0===l.RowSelectVariant?void 0:l.RowSelectVariant.radio)||"radio":(null===l.RowSelectVariant||void 0===l.RowSelectVariant?void 0:l.RowSelectVariant.checkbox)||"checkbox"})),i._defineProperty(c._assertThisInitialized(e),"newArray",(function(e){return s._toConsumableArray(Array(e))})),e}return c._createClass(n,[{key:"render",value:function(){var e=this.props,t=e.canSelectAll,n=e.isSelectable,r=e.sortBy;return o.createElement(l.Table,{cells:this.getColumns(),rows:this.createRows(),sortBy:r,"aria-label":"Loading",onSelect:n,selectVariant:n?this.selectVariant():null,canSelectAll:t},o.createElement(l.TableHeader,null),o.createElement(l.TableBody,null))}}]),n}(o.Component);f.propTypes={colSize:a.number,rowSize:a.number,columns:a.array,paddingColumnSize:a.number,sortBy:a.shape({index:a.number,direction:a.oneOf(["asc","desc"])}),isSelectable:a.bool,canSelectAll:a.bool,hasRadio:a.bool},f.defaultProps={rowSize:0,paddingColumnSize:0,canSelectAll:!1,isSelectable:!1,hasRadio:!1},t.SkeletonTable=f},1100:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(676),i=n(5),o=n(1),a=n.n(o),s=n(119),c=n.n(s),l=n(677),u=n(20),p=n.n(u);function f(e){var t=e.children,n=e.query,r=Object(i.__rest)(e,["children","query"]),o=Object(l.useQuery)(n,r);return t&&o?t(o):null}function d(e){var t=Object(l.useMutation)(e.mutation,e),n=t[0],r=t[1];return e.children?e.children(n,r):null}function y(e){var t=Object(l.useSubscription)(e.subscription,e);return e.children&&t?e.children(t):null}(f||(f={})).propTypes={client:p.a.object,children:p.a.func.isRequired,fetchPolicy:p.a.string,notifyOnNetworkStatusChange:p.a.bool,onCompleted:p.a.func,onError:p.a.func,pollInterval:p.a.number,query:p.a.object.isRequired,variables:p.a.object,ssr:p.a.bool,partialRefetch:p.a.bool,returnPartialData:p.a.bool},(d||(d={})).propTypes={mutation:p.a.object.isRequired,variables:p.a.object,optimisticResponse:p.a.oneOfType([p.a.object,p.a.func]),refetchQueries:p.a.oneOfType([p.a.arrayOf(p.a.oneOfType([p.a.string,p.a.object])),p.a.func]),awaitRefetchQueries:p.a.bool,update:p.a.func,children:p.a.func.isRequired,onCompleted:p.a.func,onError:p.a.func,fetchPolicy:p.a.string},(y||(y={})).propTypes={subscription:p.a.object.isRequired,variables:p.a.object,children:p.a.func,onSubscriptionData:p.a.func,onSubscriptionComplete:p.a.func,shouldResubscribe:p.a.oneOfType([p.a.func,p.a.bool])};var m=n(14);!function(e){function t(t){var n=e.call(this,t)||this;return n.withRef=!1,n.setWrappedInstance=n.setWrappedInstance.bind(n),n}Object(i.__extends)(t,e),t.prototype.getWrappedInstance=function(){return Object(m.b)(this.withRef,2),this.wrappedInstance},t.prototype.setWrappedInstance=function(e){this.wrappedInstance=e}}(a.a.Component);function h(e,t){void 0===t&&(t={});var n="withApollo("+function(e){return e.displayName||e.name||"Component"}(e)+")",o=function(o){function s(e){var t=o.call(this,e)||this;return t.setWrappedInstance=t.setWrappedInstance.bind(t),t}return Object(i.__extends)(s,o),s.prototype.getWrappedInstance=function(){return Object(m.b)(t.withRef,1),this.wrappedInstance},s.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},s.prototype.render=function(){var n=this;return a.a.createElement(r.a,null,(function(r){var o=Object.assign({},n.props,{client:r,ref:t.withRef?n.setWrappedInstance:void 0});return a.a.createElement(e,Object(i.__assign)({},o))}))},s.displayName=n,s.WrappedComponent=e,s}(a.a.Component);return c()(o,e,{})}},1261:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),n(231);var i=n(468),o=n(466),a=r(n(1)),s=r(n(20)),c=n(467),l=864e5,u=function(e,t){return"".concat(e," ").concat(e>1?"".concat(t,"s"):t," ago")},p=[{rightBound:1/0,description:function(e){return u(Math.round(e/31536e6),"year")}},{rightBound:31536e6,description:function(e){return u(Math.round(e/2592e6),"month")}},{rightBound:2592e6,description:function(e){return u(Math.round(e/l),"day")}},{rightBound:l,description:function(e){return u(Math.round(e/36e5),"hour")}},{rightBound:36e5,description:function(e){return u(Math.round(e/6e4),"minute")}},{rightBound:6e4,description:function(){return"Just now"}}],f=function(e){return e.toUTCString().split(",")[1].slice(0,-7).trim()},d=function(e){return{exact:function(e){return f(e)+" UTC"},onlyDate:function(e){return f(e).slice(0,-6)},relative:function(e){return p.reduce((function(t,n){return n.rightBound>Date.now()-e?n.description(Date.now()-e):t}),f(e))},invalid:function(){return"Invalid date"}}[e]},y=function(e,t,n){return{exact:function(t){return d(e)(t)},onlyDate:function(t){return d(e)(t)},relative:function(r){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return a.createElement(c.Tooltip,i._extends({},n,{content:a.createElement("div",null,r,e)}),t)}(d("exact")(r),a.createElement("span",null,d(e)(r)),t,n)},invalid:function(){return"Invalid date"}}[e]};function m(e){var t=e.date,n=e.type,r=void 0===n?"relative":n,i=e.extraTitle,o=e.tooltipProps,s=void 0===o?{}:o,c=t instanceof Date?t:new Date(t),l=null==t||"Invalid Date"===c.toString()?"invalid":r;return a.createElement(a.Fragment,null,y(l,s,i)(c))}m.propTypes={date:s.oneOfType([s.instanceOf(Date),s.string,s.number]),type:s.oneOf(["exact","onlyDate","relative"]),extraTitle:s.string,tooltipProps:s.shape(o._defineProperty({},s.string,s.oneOfType([s.number,s.string])))},t.DateFormat=m},1262:function(e,t,n){!function(e,t){"use strict";var n=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},r=function(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.compose;i(this,e);var s=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||a;this.store=t.createStore((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;return e}),n,s(t.applyMiddleware.apply(void 0,r(o)))),this.reducers={}}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"getStore",value:function(){return this.store}},{key:"register",value:function(e){this.reducers=c({},this.reducers,{},e),this.store.replaceReducer(t.combineReducers(c({},this.reducers)))}}]),e}(),u=new l;e.ReducerRegistry=l,e.applyReducerHash=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;return Object.prototype.hasOwnProperty.call(e,r.type)?e[r.type](n,r):n}},e.default=l,e.dispatchActionsToStore=function(e,t){return Object.keys(e).reduce((function(n,r){return c({},n,a({},r,(function(){return t&&t.dispatch(e[r].apply(e,arguments))})))}),{})},e.reduxRegistry=u,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(234))},745:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),n(231);var i=n(468),o=n(466),a=n(469),s=r(n(1)),c=r(n(20)),l=r(n(697)),u={xs:"xs",sm:"sm",md:"md",lg:"lg"},p=function(e){var t=e.size,n=e.isDark,r=e.className,c=a._objectWithoutProperties(e,["size","isDark","className"]),u=l("ins-c-skeleton","ins-c-skeleton__".concat(t),o._defineProperty({},"ins-m-dark",n),r);return s.createElement("div",i._extends({className:u},c),"Â ")};p.propTypes={className:c.string,size:c.oneOf(Object.values(u)),isDark:c.bool},p.defaultProps={size:u.md,isDark:!1},t.Skeleton=p,t.SkeletonSize=u},787:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),n(231);var i=n(468),o=n(466),a=n(469),s=r(n(1)),c=r(n(20)),l=r(n(697)),u=function(e){var t=e.centered,n=e.className,r=a._objectWithoutProperties(e,["centered","className"]),c=l("ins-c-spinner",o._defineProperty({},"ins-m-center",t),n);return s.createElement("div",i._extends({role:"status",className:c},r),s.createElement("span",{className:"pf-u-screen-reader"},"Loading..."))};u.propTypes={centered:c.bool,className:c.string},t.Spinner=u},833:function(e,t,n){"use strict";n.d(t,"a",(function(){return je}));var r=n(135),i=n.n(r),o=n(240),a=n.n(o),s=n(376),c=n.n(s),l=n(782),u=n.n(l),p=n(358),f=n.n(p),d=n(353),y=n.n(d),m=n(472),h=n.n(m),v=n(359),b=n.n(v),g=n(360),S=n.n(g),O=n(236),E=n.n(O),w=n(347),_=n.n(w),P=n(735),j=n.n(P),I=n(698),R=n.n(I),T=n(1008),C=n.n(T),D=n(1),A=n.n(D),x=n(20),F=n.n(x),k=n(187),N=n(348),V=n(438),M=n(475),z=n(704),B=n(804),L=n(188),W=n(1100),$=n(694),q=n.n($),U=n(1025),Y=n(703),J=n(405),H=n.n(J),Q=n(693),X="@@COMPLIANCE/EXPORT";function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var G=function(e){return e.flatMap((function(e){return e.rules&&e.rules.filter((function(e){return!e.compliant}))}))},Z=function(e){return e.flatMap((function(e){return e.rules&&e.rules.filter((function(e){return e.compliant}))}))},ee=function(e){return e.profiles?G(e.profiles):[]},te=function(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ruleObjectsFailed:ee(e)},e)}))},ne=n(1262),re=n(1261),ie=n(505),oe=n.n(ie),ae=function(e,t){return t.split(".").reduce((function(e,t){return e&&"undefined"!==e[t]?e[t]:void 0}),e)},se=function(e,t){var n=ae(e,t);return n.exportValue&&(n=n.exportValue),"object"===oe()(n)&&(n=ae(e,t+"_text")),"string"==typeof n&&n.includes(",")&&(n='"'+n+'"'),n},ce=function(e,t){var n;"csv"===t?n=function(e){var t=e.rows,n=e.columns,r=e.selectedEntities;if(t){var i=[n.map((function(e){return e.title})).join(",")];return i=i.concat((r||t).map((function(t){return e.columns.map((function(e){return se(t,e.key)})).join(",")}))),encodeURI("data:text/csv;charset=utf-8,"+i.join("\n"))}}(e):"json"===t&&(n=function(e){var t,n=e.rows,r=e.columns,i=e.selectedEntities;if(n)return t=(i||n).map((function(e){var t={};return r.forEach((function(n){var r=n.key.split("."),i=r[r.length-1];t[i]=se(e,n.key)})),t})),encodeURI("data:application/json;charset=utf-8,"+JSON.stringify(t))}(e)),function(e,t){if(e){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}}(n,function(e){return"compliance-export-"+(new Date).toISOString()+"."+e}(t))},le=n(467),ue=n(687),pe=n(691),fe=n(813);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me=function(e){if(e.testResultProfiles&&e.testResultProfiles.length>0)return{title:A.a.createElement(k.Link,{to:{pathname:"/systems/".concat(e.id)}},"View report")}},he=function(e){return void 0!==e.osMajorVersion&&void 0!==e.osMinorVersion&&null!==e.osMajorVersion&&null!==e.osMinorVersion&&!(0===e.osMajorVersion&&0===e.osMinorVersion)},ve=function(e,t){return{title:A.a.createElement(pe.TextContent,null,t.name?A.a.createElement(k.Link,{to:{pathname:"/systems/".concat(t.id)}},t.name):e.display_name,he(t)&&A.a.createElement(ue.Text,{component:ue.TextVariants.small},"RHEL ",t.osMajorVersion,".",t.osMinorVersion)),exportValue:e.display_name||t.name}},be=function(e,t){return!!(t||[]).find((function(t){return t.id===e}))},ge=function(e,t,n,r){return t.map((function(t){void 0===t.facts&&(t.facts={});var i,o,a,s,c,l,u,p,f,d,y,m,h=e.map((function(e){return e.node})).find((function(e){return t.id===e.id}));if(void 0===h){if(!n)return;h={testResultProfiles:[],policies:[]}}return h.policyNames=function(e){if(e==={})return"";var t=e.policies.map((function(e){return e.name})),n=e.testResultProfiles.filter((function(e){return!e.policy})).map((function(e){var t=e.name;return"(External) ".concat(t)}));return[].concat(j()(t),j()(n)).join(", ")}(h),h.rulesPassed=Z(h.testResultProfiles).length,h.rulesFailed=G(h.testResultProfiles).length,h.lastScanned=(i=h.testResultProfiles,o=(void 0===i?[]:i).map((function(e){return new Date(e.lastScanned)})),(a=new Date(Math.max.apply(null,o.filter((function(e){return isFinite(e)})))))instanceof Date&&isFinite(a)?a:"Never"),h.compliant=(void 0===(s=h.testResultProfiles)?[]:s).every((function(e){return"Never"===e.lastScanned||!0===e.compliant})),h.score=(c=h.testResultProfiles,u=(l=void 0===c?[]:c).reduce((function(e,t){return e+t.score}),0),(p=l.reduce((function(e,t){return Z([t]).length+G([t]).length>0?e+1:e}),0))?u/p:0),h.supported=(void 0===(f=h.testResultProfiles)?[]:f).reduce((function(e,t){return e&&t.supported}),!0),{id:t.id,selected:be(t.id,r),account:t.account,bios_uuid:t.bios_uuid,created:t.created,display_name:t.display_name||h.name,fqdn:t.fqdn,insights_id:t.insights_id,ip_addresses:t.ip_addresses,mac_addresses:t.mac_addresses,rhel_machine_id:t.rhel_machine_id,satellite_id:t.satellite_id,subscription_manager_id:t.subscription_manager_id,tags:t.tags,updated:t.updated,facts:{inventory:{hostname:void 0!==t.facts.inventory?t.facts.inventory.hostname:t.facts.hostname,machine_id:void 0!==t.facts.inventory?t.facts.inventory.machine_id:t.facts.machine_id,release:void 0!==t.facts.inventory?t.facts.inventory.release:t.facts.release},compliance:{display_name:ve(t,h),policies:(m=h,{title:m.policyNames?A.a.createElement(le.Tooltip,{content:m.policyNames},A.a.createElement(fe.default,{lines:2,width:540},m.policyNames)):A.a.createElement(ue.Text,{className:"grey-icon"},"No policies"),exportValue:m.policyNames}),details_link:me(h),rules_passed:h.rulesPassed,rules_failed:{title:A.a.createElement(k.Link,{to:{pathname:"/systems/".concat(h.id),query:{hidePassed:!0}}},h.rulesFailed)},rules_failed_text:h.rulesFailed,compliance_score:Object(Q.c)(h),compliance_score_text:Object(Q.F)(h),last_scanned:h.lastScanned instanceof Date?{title:A.a.createElement(re.DateFormat,{date:Date.parse(h.lastScanned),type:"relative"})}:h.lastScanned,last_scanned_text:h.lastScanned,ssg_version:(d=h,y=d.testResultProfiles,(void 0===y?[]:y).map((function(e){return e.ssgVersion})).filter((function(e){return!!e})).join(", ")),supported:h.supported}}}})).filter((function(e){return!!e}))},Se=function(e,t){var n=e.rows.filter((function(n){return t.includes(n.id)&&!(e.selectedEntities||[]).map((function(e){return e.id})).includes(n.id)}));return ye(ye({},e),{},{selectedEntities:(e.selectedEntities||[]).concat(n)})},Oe=function(e,t){return ye(ye({},e),{},{selectedEntities:(e.selectedEntities||[]).filter((function(e){return!t.includes(e.id)}))})},Ee=function(e,t,n){var r;return Object(ne.applyReducerHash)((r={},_()(r,"UPDATE_SYSTEMS",(function(e,t){var n=t.systems,r=t.systemsCount;return ye(ye({},e),{},{systems:n,systemsCount:r})})),_()(r,"UPDATE_ROWS",(function(e){return ye(ye({},e),{},{loaded:!0,rows:ge(e.systems||[],e.rows||[],n,e.selectedEntities)})})),_()(r,e.LOAD_ENTITIES_FULFILLED,(function(e){return ye(ye({},e),{},{rows:ge(e.systems||[],e.rows,n,e.selectedEntities),total:n?e.total:e.systemsCount,columns:e.total>0?t:[{title:""}]})})),_()(r,X,(function(e,t){var n=t.payload.format;return ce(e,n),e})),_()(r,"SELECT_ENTITY",(function(e,t){var n,r=t.payload,i=r.id,o=r.selected,a=r.clearAll;return(0===(n=0===i?o?function(e){return Se(e,e.rows.map((function(e){return e.id})))}(e):function(e){return Oe(e,e.rows.map((function(e){return e.id})))}(e):o?function(e,t){return Se(e,[t])}(e,i):function(e,t){return Oe(e,[t])}(e,i)).selectedEntities.length||a)&&(n.selectedEntities=void 0),n})),_()(r,"SELECT_ENTITIES",(function(e,t){return{selectedEntities:t.payload.ids}})),r))},we=n(377),_e=function(e){var t=e.profile;return t.supported&&t.ssg_version||A.a.createElement(Q.C,null,t.ssg_version)};_e.propTypes={profile:F.a.object};var Pe,je={SSGVersion:_e};function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S()(this,n)}}function Ce(){var e=R()(["\nquery getSystems($filter: String!, $policyId: ID, $perPage: Int, $page: Int) {\n    systems(search: $filter, limit: $perPage, offset: $page) {\n        totalCount\n        edges {\n            node {\n                id\n                name\n                osMajorVersion\n                osMinorVersion\n                testResultProfiles(policyId: $policyId) {\n                    id\n                    name\n                    lastScanned\n                    external\n                    compliant\n                    score\n                    supported\n                    ssgVersion\n                    policy {\n                        id\n                    }\n                }\n                policies(policyId: $policyId) {\n                    id\n                    name\n                }\n            }\n        }\n    }\n}\n"]);return Ce=function(){return e},e}function De(){var e=R()(["\nquery getSystems($filter: String!, $policyId: ID, $perPage: Int, $page: Int) {\n    systems(search: $filter, limit: $perPage, offset: $page) {\n        totalCount\n        edges {\n            node {\n                id\n                name\n                osMajorVersion\n                osMinorVersion\n                testResultProfiles(policyId: $policyId) {\n                    id\n                    name\n                    refId\n                    lastScanned\n                    compliant\n                    external\n                    score\n                    supported\n                    ssgVersion\n                    rules {\n                        refId\n                        title\n                        compliant\n                        remediationAvailable\n                    }\n                }\n                policies(policyId: $policyId) {\n                    id\n                    name\n                }\n            }\n        }\n    }\n}\n"]);return De=function(){return e},e}var Ae=q()(De()),xe=q()(Ce()),Fe=function(e){return C()(e.initialDefaultState(),(function(e){return!!e}))},ke={page:1},Ne=function(e,t){return[].concat(j()(Object(we.f)(e)),j()(t?Object(we.e)(e):[]))},Ve=H()()(Pe=function(e){b()(r,e);var t,n=Te(r);function r(){var e;f()(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),_()(h()(e),"inventory",A.a.createRef()),_()(h()(e),"filterConfig",new Y.FilterConfigBuilder([].concat(j()(we.c),j()(e.props.compliantFilter?we.b:[]),j()(e.props.policies&&e.props.policies.length>0?Ne(e.props.policies,e.props.showOsFilter):[])))),_()(h()(e),"chipBuilder",e.filterConfig.getChipBuilder()),_()(h()(e),"filterBuilder",e.filterConfig.getFilterBuilder()),_()(h()(e),"state",Re(Re({},ke),{},{InventoryCmp:null,policyId:e.props.policyId,perPage:50,totalCount:0,activeFilters:Fe(e.filterConfig)})),_()(h()(e),"componentDidMount",(function(){var t=e.props,n=t.clearAll,r=t.selectedEntities;r&&r.length>0&&n(),(e.props.preselectedSystems?Promise.resolve(e.props.selectEntities(e.props.preselectedSystems)):Promise.resolve()).then((function(){e.updateSystems().then((function(){return e.fetchInventory()}))}))})),_()(h()(e),"componentDidUpdate",(function(t){t.complianceThreshold!==e.props.complianceThreshold&&e.updateSystems()})),_()(h()(e),"onRefresh",(function(t){var n=t.page,r=t.per_page,i=u()(t,["page","per_page"]);e.props.showAllSystems&&e.inventory&&e.inventory.current?e.setState({page:n,perPage:r},(function(){e.inventory.current.onRefreshData(Re(Re({page:n,perPage:r},i),{},{per_page:r}))})):e.setState({page:n,perPage:r},(function(){return e.updateSystems().then((function(){e.inventory&&e.inventory.current&&e.inventory.current.onRefreshData(Re(Re({page:n,perPage:r},i),{},{per_page:r}))}))}))})),_()(h()(e),"fetchSystems",(function(){var t=e.props,n=t.client,r=t.showOnlySystemsWithTestResults,i=t.remediationsEnabled,o=e.state,a=o.policyId,s=o.perPage,c=o.page,l=o.activeFilters,u=e.filterBuilder.buildFilterString(l);r&&(u="has_test_results = true ".concat(u.length>0?"and ".concat(u):""));var p={filter:u,perPage:s,page:c};return a&&(u="policy_id = ".concat(a," and ").concat(u),p=Re(Re({},p),{},{filter:u,policyId:a})),n.query({query:i?Ae:xe,fetchResults:!0,fetchPolicy:"no-cache",variables:p})})),_()(h()(e),"updateSystems",(function(){var t=e.props.systems.map((function(e){return e.node.id})).sort();return e.fetchSystems().then((function(t){return e.props.updateSystems({systems:t.data.systems.edges,systemsCount:t.data.systems.totalCount})})).then((function(){var n=e.props.systems.map((function(e){return e.node.id})).sort();JSON.stringify(n)===JSON.stringify(t)&&e.props.updateRows()})).catch((function(t){e.setState((function(e){return Re(Re({},e),{},{error:t})}))}))})),_()(h()(e),"onExportSelect",(function(t,n){return e.props.exportFromState(n)})),_()(h()(e),"onFilterUpdate",(function(t,n){e.props.updateSystems({systems:[],systemsCount:0}),e.setState(Re(Re({},ke),{},{activeFilters:Re(Re({},e.state.activeFilters),{},_()({},t,n))}),e.updateSystems)})),_()(h()(e),"deleteFilter",(function(t){var n=e.filterConfig.removeFilterWithChip(t,e.state.activeFilters);e.setState(Re(Re({},ke),{},{activeFilters:n}),e.updateSystems)})),_()(h()(e),"clearAllFilter",(function(){e.setState(Re(Re({},ke),{},{activeFilters:Fe(e.filterConfig)}),e.updateSystems)})),_()(h()(e),"onFilterDelete",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r?e.clearAllFilter():e.deleteFilter(n[0])})),_()(h()(e),"onBulkSelect",(function(){var t=e.props,n=t.selectedEntities,r=t.selectAll,i=t.clearSelection,o=t.allSelectedOnPage;0===n.length||n.length>0&&!o?r():i()})),_()(h()(e),"isExportDisabled",(function(){var t=e.props,n=t.total,r=t.selectedEntities;return 0===(n||0)&&0===r.length})),e}return y()(r,[{key:"fetchInventory",value:(t=c()(a.a.mark((function e(){var t,n,r,i,o,s,c,l,u=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.columns,r=t.showAllSystems,i=t.clearInventoryFilter,e.next=3,insights.loadInventory({ReactRedux:L,react:A.a,reactRouterDom:k,pfReact:N,reactIcons:M,pfReactTable:z});case 3:o=e.sent,s=o.inventoryConnector,c=o.INVENTORY_ACTION_TYPES,l=o.mergeWithEntities,i(),this.getRegistry().register(Re({},l(Ee(c,n,r)))),this.setState((function(){return{InventoryCmp:s(u.props.store).InventoryTable}}));case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t=this.props,n=t.remediationsEnabled,r=t.compact,i=t.enableExport,o=t.showAllSystems,a=t.showActions,s=t.showComplianceSystemsInfo,c=t.selectedEntities,l=t.selectedEntitiesIds,u=t.systems,p=t.total,f=t.policyId,d=t.systemProps,y=this.state,m=y.page,h=y.perPage,v=y.InventoryCmp,b=y.activeFilters,g=y.error,S=this.filterConfig.buildConfiguration(this.onFilterUpdate,b,{hideLabel:!0}),O=this.chipBuilder.chipsFor(this.state.activeFilters),E=i?{isDisabled:this.isExportDisabled(),onSelect:this.onExportSelect}:{},w=Re(Re({},d),{},{onRefresh:this.onRefresh,ref:this.inventory,page:m,perPage:h,exportConfig:E,tableProps:{canSelectAll:!1},bulkSelect:{checked:c.length>0&&(!!this.props.allSelectedOnPage||null),onSelect:this.onBulkSelect,count:c.length,label:c.length>0?"".concat(c.length," Selected"):void 0}});return a&&(w.actions=[{title:"View in inventory",onClick:function(e,t,n){var r=n.id,i="beta"===window.location.pathname.split("/")[1];window.location.href="".concat(window.location.origin).concat(i?"/beta":"","/insights/inventory/").concat(r)}}]),o||(w.total=p,w.items=u.map((function(e){return e.node.id})),w.filterConfig=S,w.activeFiltersConfig={filters:O,onDelete:this.onFilterDelete}),r&&(w.variant=B.b.compact),void 0===g&&(e=!0),f&&0===p&&0===Object.keys(b).length&&(w.tableProps.rows=[{cells:[{title:A.a.createElement(Q.i,null)}]}],w.tableProps.columns=[],w.hasItems=!1,w.hasCheckbox=!1),!o&&n&&(w.dedicatedAction=A.a.createElement(Y.ComplianceRemediationButton,{allSystems:te(u.filter((function(e){return l.includes(e.node.id)})).map((function(e){return e.node}))),selectedRules:[]})),A.a.createElement(Q.y,{stateValues:{error:g,noError:e}},A.a.createElement(Q.z,{stateKey:"error"},A.a.createElement(Q.e,{error:g})),A.a.createElement(Q.z,{stateKey:"noError"},s&&A.a.createElement(V.a,{isInline:!0,variant:"info",title:"The list of systems in this view is different than those that appear in the Inventory. Only systems previously or currently associated with compliance policies are displayed."}),v?A.a.createElement(v,w):A.a.createElement(U.SkeletonTable,{colSize:2,rowSize:15})))}}]),r}(A.a.Component))||Pe;Ve.propTypes={allSelectedOnPage:F.a.bool,clearAll:F.a.func,clearInventoryFilter:F.a.func,clearSelection:F.a.func,client:F.a.object,columns:F.a.array,compact:F.a.bool,complianceThreshold:F.a.number,compliantFilter:F.a.bool,enableExport:F.a.bool,error:F.a.object,exportFromState:F.a.func,policies:F.a.array,policyId:F.a.string,preselectedSystems:F.a.array,remediationsEnabled:F.a.bool,selectAll:F.a.func,selectEntities:F.a.func,selectedEntities:F.a.array,selectedEntitiesIds:F.a.array,showActions:F.a.bool,showAllSystems:F.a.bool,showOnlySystemsWithTestResults:F.a.bool,showOsFilter:F.a.bool,store:F.a.object,systems:F.a.array,total:F.a.number,updateRows:F.a.func,updateSystems:F.a.func,systemProps:F.a.shape({isFullView:F.a.bool}),showComplianceSystemsInfo:F.a.bool},Ve.defaultProps={remediationsEnabled:!0,compact:!1,enableExport:!0,showAllSystems:!1,complianceThreshold:0,showOnlySystemsWithTestResults:!1,showActions:!0,compliantFilter:!1,selectedEntities:[],selectedEntitiesIds:[],systems:[],clearAll:function(){return{}},exportFromState:function(){return{}},systemProps:{},showComplianceSystemsInfo:!1};var Me=Object(W.a)((function(e){return A.a.createElement(Ve,i()({},e,{store:L.useStore()}))}));t.b=Object(L.connect)((function(e){return void 0===e.entities||void 0===e.entities.rows?{selectedEntities:[],systems:[]}:{allSelectedOnPage:0===e.entities.rows.filter((function(t){return!(e.entities.selectedEntities||[]).map((function(e){return e.id})).includes(t.id)})).length,selectedEntities:e.entities.selectedEntities,selectedEntitiesIds:(e.entities.selectedEntities||[]).map((function(e){return e.id})),systems:e.entities.systems,total:e.entities.total}}),(function(e){return{clearInventoryFilter:function(){return e({type:"CLEAR_FILTERS"})},exportFromState:function(t){return e(function(e){return{type:X,payload:{format:e}}}(t))},updateSystems:function(t){e(Re({type:"UPDATE_SYSTEMS"},t))},updateRows:function(){return e({type:"UPDATE_ROWS"})},selectAll:function(){return e({type:"SELECT_ENTITY",payload:{id:0,selected:!0}})},clearSelection:function(){return e({type:"SELECT_ENTITY",payload:{id:0,selected:!1}})},clearAll:function(){return e({type:"SELECT_ENTITY",payload:{clearAll:!0}})},selectEntities:function(t){return e({type:"SELECT_ENTITIES",payload:{ids:t}})}}}))(Me)}}]);
//# sourceMappingURL=../sourcemaps/EditPolicy~PolicyDetails~ReportDetails~SystemDetails-d7f2c84d3e1e165be73bd13ea55adfbd.js.map